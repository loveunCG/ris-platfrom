var FormDropzone = function() {
    return {
        init: function() {
            Dropzone.options.myDropzone = {
                dictDefaultMessage: "",
                success: function(file, response) {
                    var response = jQuery.parseJSON(response);
                    var upload_type = $('input[name=uploadfile_type]:checked').val();
                    var upload_type1 = $('input[name=uploadfile_type1]:checked').val();
                    if (upload_type == '1') {
                        $('#upload_doc_name').val(file.name);
                        $('#upload_doc_file_path').val(response.real_path);
                    } else if (upload_type == '2') {
                        $('#upload_dicom_name').val(file.name);
                        $('#upload_dicom_file_path').val(response.real_path);
                    }
                    if (upload_type1 == '1') {
                        $('#upload_doc_name1').val(file.name);
                        $('#upload_doc_file_path1').val(response.real_path);
                    } else if (upload_type1 == '2') {
                        $('#upload_dicom_name1').val(file.name);
                        $('#upload_dicom_file_path1').val(response.real_path);
                    }
                    console.log(response);
                },
                accept: function(file, done) {
                    console.log(file.name);
                    done();
                },
                init: function() {
                    this.on("addedfile", function(e) {
                        var n = Dropzone.createElement("<a href='javascript:;'' class='btn red btn-sm btn-block'>删除</a>"),
                            t = this;
                        n.addEventListener("click", function(n) {
                            n.preventDefault(), n.stopPropagation(), t.removeFile(e)
                        }), e.previewElement.appendChild(n)
                    })
                }
            }
        }
    }
}();
jQuery(document).ready(function() {
    FormDropzone.init()
});